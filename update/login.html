
<html>

    <head>
        <title>Log in</title>
    </head>

    <body>
        <h1>Travel database log in page</h1>
    
        <p>Please sign in here to access the travel plans database</p>
    
        <p>Don't have an account? <a href="register.html">Register here</a></p>
    
        <input type="text" id="username" name="username" placeholder="Username" required><br>
        <input type="password" id="password" name="password" placeholder="Password" required><br>
        <button type="button" onclick="check_user()">Log in</button><br>
        
        <p>Forgot your password? <a href="/reset_password">Reset it here</a></p>
        
        <script>
            var username = document.getElementById('username').value;
            var password = document.getElementById('password').value;

            function login(username, password) {
                $.ajax({
                    type: "POST",
                    url: "/api/login",
                    data: JSON.stringify({ username: username, password: password }),
                    contentType: "application/json",
                    success: function(response) {
                        if (response.success) {
                            alert("Login successful!");
                            window.location.href = "/dashboard"; // Redirect to dashboard or another page
                        } else {
                            alert("Invalid username or password.");
                        }
                    },
                    error: function(xhr, status, error) {
                        console.error("Error during login:", error);
                        alert("An error occurred. Please try again.");
                    }
                });
            }

            function processLogin(result) {
                console.log("in process")
                console.log(result)
                }
    login(processLogin)
        </script>
    </body>
    
</html>
